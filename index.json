[{"content":"03/06/2023 41%\n","permalink":"https://actuallyyao.com/posts/blog/amusing/","summary":"03/06/2023 41%","title":"Reading Notes - Amusing Ourselves to Death"},{"content":"英语中侧重描述电脑屏幕大小时会用「screen real estate」，屏幕如资产，越大的屏幕提供越多的可用空间。\n下图是我的「屏幕资产」，由一块竖置的25吋2k屏幕和一块横置的27吋4k屏幕组成。多次调整之后，逐渐形成目前比较固定的使用逻辑。下文做分享。\n左侧屏幕为何竖置？ 首先，桌子不够大。其次，1个竖向的9:16可以分割出3个横向的9:5.3，且实际面积不会太小，非常适合放置辅助性的内容。这类内容与使用电脑时的核心关注内容相区别，不需要长时间关注，因此在面积分配上优先级不高。\n对于这块屏幕我目前的内容放置习惯为：\n上：视频内容。\n以YouTube为主，我喜欢在工作学习的同时放些熟悉的视频，如每集都看过至少5次的Key and Peele。在英语密集型学习的时候，可能被欧路词典取代。\n中：用于随时做查询检索的浏览器页面。\n当然，主要为Google搜索及搜索结果内容。\n下：音乐播放器。\n音乐不能少，Lofi Girl或其他pop音乐。工作学习时需要音乐，但必须是熟悉的或内敛的，否则注意力会被吸引。\n右侧屏幕上没有出现过真全屏 MacOS下，当一个窗口被全屏，则成为一个「桌面」，在一些使用逻辑上与非全屏页面会有明显区别，沉浸感虽然强，但不能说很方便。自AltTab+Rectangle+Alfred满足了我对窗口管理的一切幻想后，我基本不会再把任何一个页面真正「全屏」了，dock也再没出现过……\n右侧屏幕布局的核心逻辑为，平铺两个核心内容区，并使用边角空间再放一个辅助app：\n左侧：核心内容1。\nVSCode最常出现，双屏状态下注意力分配最多的app，统治两块屏幕，为「山中之虎」。\n右侧：核心内容2。\nNotion，最核心的辅助app。各种tracker、code snippets都在这里，需要随时取用，因此给次黄金位置且永远前置。\n边角：播客app。\n小宇宙为主，当做不费脑子的工作时，播客前置提供内容输出。有时可能时荔枝，满足不可告人的guilty pleasure。\n总结：平铺的满足感 两块屏幕提供的real estate，让我能够把一轮工作或学习中需要使用的所有app平铺在眼前，且兼顾娱乐和生产力，可谓我独特的「battle station」。习惯于这样的奢侈后，出门在外直接用14吋的笔记本屏幕时便常感局促。\n也许，这与拥有大平层是类似的满足感吧。\n","permalink":"https://actuallyyao.com/posts/blog/screen/","summary":"英语中侧重描述电脑屏幕大小时会用「screen real estate」，屏幕如资产，越大的屏幕提供越多的可用空间。\n下图是我的「屏幕资产」，由一块竖置的25吋2k屏幕和一块横置的27吋4k屏幕组成。多次调整之后，逐渐形成目前比较固定的使用逻辑。下文做分享。\n左侧屏幕为何竖置？ 首先，桌子不够大。其次，1个竖向的9:16可以分割出3个横向的9:5.3，且实际面积不会太小，非常适合放置辅助性的内容。这类内容与使用电脑时的核心关注内容相区别，不需要长时间关注，因此在面积分配上优先级不高。\n对于这块屏幕我目前的内容放置习惯为：\n上：视频内容。\n以YouTube为主，我喜欢在工作学习的同时放些熟悉的视频，如每集都看过至少5次的Key and Peele。在英语密集型学习的时候，可能被欧路词典取代。\n中：用于随时做查询检索的浏览器页面。\n当然，主要为Google搜索及搜索结果内容。\n下：音乐播放器。\n音乐不能少，Lofi Girl或其他pop音乐。工作学习时需要音乐，但必须是熟悉的或内敛的，否则注意力会被吸引。\n右侧屏幕上没有出现过真全屏 MacOS下，当一个窗口被全屏，则成为一个「桌面」，在一些使用逻辑上与非全屏页面会有明显区别，沉浸感虽然强，但不能说很方便。自AltTab+Rectangle+Alfred满足了我对窗口管理的一切幻想后，我基本不会再把任何一个页面真正「全屏」了，dock也再没出现过……\n右侧屏幕布局的核心逻辑为，平铺两个核心内容区，并使用边角空间再放一个辅助app：\n左侧：核心内容1。\nVSCode最常出现，双屏状态下注意力分配最多的app，统治两块屏幕，为「山中之虎」。\n右侧：核心内容2。\nNotion，最核心的辅助app。各种tracker、code snippets都在这里，需要随时取用，因此给次黄金位置且永远前置。\n边角：播客app。\n小宇宙为主，当做不费脑子的工作时，播客前置提供内容输出。有时可能时荔枝，满足不可告人的guilty pleasure。\n总结：平铺的满足感 两块屏幕提供的real estate，让我能够把一轮工作或学习中需要使用的所有app平铺在眼前，且兼顾娱乐和生产力，可谓我独特的「battle station」。习惯于这样的奢侈后，出门在外直接用14吋的笔记本屏幕时便常感局促。\n也许，这与拥有大平层是类似的满足感吧。","title":"25+27吋屏幕给了我什么"},{"content":"02/25/2023 62%\nReceived the paperback Chinese version yesterday. I find it necessary to have a hard copy at hand to refer to from time to time, censored or not.\nI noticed myself tending to skip the charts in the book. Maybe it\u0026rsquo;s because even though I know in general what each chart is about, I failed to grasp the specifics, which makes it hard for me to fully understand the chart.\nTake the following two charts, I understand that the left one illustrates Britain\u0026rsquo;s economic conditions in the 1960s, but the reason why the figure dropped to below zero several times befuddled me. What does a negative current account GDP proportion mean?\n02/15/2023 49%\nThe Habsburg Empire is not completely new to me, but I did not know much about it. Turns out it used to be a Germanic-centric family empire that spread across the European continent, from Spain to the west to the Ottoman Empire to the east. The Dutch broke free from the bigger empire in 1581 and soon became the wealthiest country in the world, with its currency the Dutch Gilders becoming the world’s reserve currency.\n02/14/2023 47%\nReaching Part II today. The author promises to illustrate on what had happened in the world in the past 500 years under the influence of the so called perpetual motion machine of various cycles. Specifically, Dalio will focus on the Netherlands, Britain, the US and China, which left significant marks on world history.\nI love learning about history. However, I need to pay extra attention to the economic/financial mechanisms working alongside politics and technological advancements, though the three are deeply intertwined.\n02/13/2023 43%\nNever got the chance to read today, but like to share a quote that I found useful through previous reading.\n\u0026ldquo;\u0026hellip;in the upwave, debt is increased and financial wealth and obligations rise relative to tangible wealth to the point that these promises to pay in the future (i.e., the values of cash, bonds, and stocks) can’t be met. This causes “run on the bank”-type debt problems to emerge, which leads to the printing of money to try to relieve the problems of debt defaults and falling stock market prices, which leads to the devaluation of money and in turn to financial wealth going down relative to real wealth, until the real (inflation-adjusted) value of financial assets returns to being low relative to tangible wealth. Then the cycle begins again.”\nRay Dalio, 'Principles for Dealing with the Changing World Order' 02/12/2023 43%\nI never liked the first installment in the Principles series, though the book was widely popular even in China and my then supervisor asked us to read it. I quickly skipped through it and found it too focused on mental elements that sound perfectly right but weak in guiding everyday life.\nDalio presented the second book, this time with detailed data and charts about major countries in the world, telling stories about their rise and fall. I was hooked quickly.\n","permalink":"https://actuallyyao.com/posts/blog/principle/","summary":"02/25/2023 62%\nReceived the paperback Chinese version yesterday. I find it necessary to have a hard copy at hand to refer to from time to time, censored or not.\nI noticed myself tending to skip the charts in the book. Maybe it\u0026rsquo;s because even though I know in general what each chart is about, I failed to grasp the specifics, which makes it hard for me to fully understand the chart.","title":"Reading Notes - Principles 2"},{"content":"背景 在搭建HUGO博客的过程中，无意间发现了Elizen的博客，审美和文笔都非常好，且中文字体好看极了，通过检索字体名为「霞鹜文楷」，取名自王勃《滕王阁序》。\n最近顺着她的博客找到了木木木木木写的通过CDN使用此字体的方法，迫不及待拿来试试。\n从小最喜欢白居易的《琵琶行》，画面感很强，意蕴悠长，久而不忘。那么就用《琵琶行》来测试字体吧。\n琵琶行 琵琶行·并序\n【唐】白居易\n元和十年，予左迁九江郡司马。明年秋，送客湓浦口，闻船中夜弹琵琶者，听其音铮铮然，有京都声。问其人，本长安倡女，尝学琵琶于穆、曹二善才，年长色衰，委身为贾人妇。遂命酒使快弹数曲，曲罢悯黙，自叙少小时欢乐事，今漂沦憔悴，转徙于江湖间。予出官二年，恬然自安；感斯人言，是夕始觉有迁谪意，因为长句，歌以赠之，凡六百一十六言，命曰《琵琶行》。\n浔阳江头夜送客，枫叶荻花秋瑟瑟。\n主人下马客在船，举酒欲饮无管弦。\n醉不成欢惨将别，别时茫茫江浸月。\n忽闻水上琵琶声，主人忘归客不发。\n寻声暗问弹者谁，琵琶声停欲语迟。\n移船相近邀相见，添酒回灯重开宴。\n千呼万唤始出来，犹抱琵琶半遮面。\n转轴拨弦三两声，未成曲调先有情。\n弦弦掩抑声声思，似诉平生不得志。\n低眉信手续续弹，说尽心中无限事。\n轻拢慢撚抹复挑，初为霓裳后六幺。\n大弦嘈嘈如急雨，小弦切切如私语。\n嘈嘈切切错杂弹，大珠小珠落玉盘。\n间关莺语花底滑，幽咽泉流水下滩。\n水泉冷涩弦凝绝，凝绝不通声暂歇。\n别有幽愁暗恨生，此时无声胜有声。\n银瓶乍破水浆迸，铁骑突出刀枪鸣。\n曲终收拨当心画，四弦一声如裂帛。\n东船西舫悄无言，唯见江心秋月白。\n沉吟放拨插弦中，整顿衣裳起敛容。\n自言本是京城女，家在虾蟆陵下住。\n十三学得琵琶成，名属教坊第一部。\n曲罢曾教善才服，妆成每被秋娘妒。\n五陵年少争缠头，一曲红绡不知数。\n钿头银篦击节碎，血色罗裙翻酒污。\n今年欢笑复明年，秋月春风等闲度。\n弟走从军阿姨死，暮去朝来颜色故。\n门前冷落车马稀，老大嫁作商人妇。\n商人重利轻别离，前月浮梁买茶去。\n去来江口守空船，绕船月明江水寒。\n夜深忽梦少年事，梦啼妆泪红阑干。\n我闻琵琶已叹息，又闻此语重唧唧。\n同是天涯沦落人，相逢何必曾相识。\n我从去年辞帝京，谪居卧病浔阳城。\n浔阳地僻无音乐，终岁不闻丝竹声。\n住近湓江地低湿，黄芦苦竹绕宅生。\n其间旦暮闻何物，杜鹃啼血猿哀鸣。\n春江花朝秋月夜，往往取酒还独倾。\n岂无山歌与村笛，呕哑嘲哳难为听。\n今夜闻君琵琶语，如听仙乐耳暂明。\n莫辞更坐弹一曲，为君翻作琵琶行。\n感我此言良久立，却坐促弦弦转急。\n凄凄不似向前声，满座重闻皆掩泣。\n座中泣下谁最多？江州司马青衫湿。\n","permalink":"https://actuallyyao.com/posts/blog/cnfont_test/","summary":"背景 在搭建HUGO博客的过程中，无意间发现了Elizen的博客，审美和文笔都非常好，且中文字体好看极了，通过检索字体名为「霞鹜文楷」，取名自王勃《滕王阁序》。\n最近顺着她的博客找到了木木木木木写的通过CDN使用此字体的方法，迫不及待拿来试试。\n从小最喜欢白居易的《琵琶行》，画面感很强，意蕴悠长，久而不忘。那么就用《琵琶行》来测试字体吧。\n琵琶行 琵琶行·并序\n【唐】白居易\n元和十年，予左迁九江郡司马。明年秋，送客湓浦口，闻船中夜弹琵琶者，听其音铮铮然，有京都声。问其人，本长安倡女，尝学琵琶于穆、曹二善才，年长色衰，委身为贾人妇。遂命酒使快弹数曲，曲罢悯黙，自叙少小时欢乐事，今漂沦憔悴，转徙于江湖间。予出官二年，恬然自安；感斯人言，是夕始觉有迁谪意，因为长句，歌以赠之，凡六百一十六言，命曰《琵琶行》。\n浔阳江头夜送客，枫叶荻花秋瑟瑟。\n主人下马客在船，举酒欲饮无管弦。\n醉不成欢惨将别，别时茫茫江浸月。\n忽闻水上琵琶声，主人忘归客不发。\n寻声暗问弹者谁，琵琶声停欲语迟。\n移船相近邀相见，添酒回灯重开宴。\n千呼万唤始出来，犹抱琵琶半遮面。\n转轴拨弦三两声，未成曲调先有情。\n弦弦掩抑声声思，似诉平生不得志。\n低眉信手续续弹，说尽心中无限事。\n轻拢慢撚抹复挑，初为霓裳后六幺。\n大弦嘈嘈如急雨，小弦切切如私语。\n嘈嘈切切错杂弹，大珠小珠落玉盘。\n间关莺语花底滑，幽咽泉流水下滩。\n水泉冷涩弦凝绝，凝绝不通声暂歇。\n别有幽愁暗恨生，此时无声胜有声。\n银瓶乍破水浆迸，铁骑突出刀枪鸣。\n曲终收拨当心画，四弦一声如裂帛。\n东船西舫悄无言，唯见江心秋月白。\n沉吟放拨插弦中，整顿衣裳起敛容。\n自言本是京城女，家在虾蟆陵下住。\n十三学得琵琶成，名属教坊第一部。\n曲罢曾教善才服，妆成每被秋娘妒。\n五陵年少争缠头，一曲红绡不知数。\n钿头银篦击节碎，血色罗裙翻酒污。\n今年欢笑复明年，秋月春风等闲度。\n弟走从军阿姨死，暮去朝来颜色故。\n门前冷落车马稀，老大嫁作商人妇。\n商人重利轻别离，前月浮梁买茶去。\n去来江口守空船，绕船月明江水寒。\n夜深忽梦少年事，梦啼妆泪红阑干。\n我闻琵琶已叹息，又闻此语重唧唧。\n同是天涯沦落人，相逢何必曾相识。\n我从去年辞帝京，谪居卧病浔阳城。\n浔阳地僻无音乐，终岁不闻丝竹声。\n住近湓江地低湿，黄芦苦竹绕宅生。\n其间旦暮闻何物，杜鹃啼血猿哀鸣。\n春江花朝秋月夜，往往取酒还独倾。\n岂无山歌与村笛，呕哑嘲哳难为听。\n今夜闻君琵琶语，如听仙乐耳暂明。\n莫辞更坐弹一曲，为君翻作琵琶行。\n感我此言良久立，却坐促弦弦转急。\n凄凄不似向前声，满座重闻皆掩泣。\n座中泣下谁最多？江州司马青衫湿。","title":"琵琶行"},{"content":"2019年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。\n随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内部的BI平台做数据查询、日常观测Tableau看板advanced level的SQL。\n第一次接触SQL已经是工作之后，那时看到数据分析师的电脑屏幕上总是密密麻麻的代码，不仅觉得无比高端，同时也觉得与自己无关。\n直到项目上需要取数DA排期排不上，才第一次想，需求也不复杂，要不自己试试。于是一边网上看教程（这里主要是W3Cschool），一边看着之前DA给写过的SQL照猫画虎，终于写成了自己的第一个SQL。原本觉得和自己无关的代码，突然可以自己写出来，还是很激动的，并且也并不觉得很难。从此，我便能自己写就自己写，不知不觉节省了不少等排期的功夫。\n来到2021年，我逐渐觉得自己的SQL能力遇到了瓶颈，于是想找一找网课做系统性的学习。这里不记得如何找到了DataCamp，它也是这篇博客的主角。\nDataCamp DataCamp offers interactive R, Python, Sheets, SQL and shell courses. 这里不得不提DataCamp的Tracks。网站针对你想要学习到的技能（Skill Tracks），或成为的角色（Career Tracks），把需要学习的课程按照一定顺序排列起来组成Tracks，交给你一步一步学，实质其实就是课程的list。当时的我想要系统学习SQL，便enroll了名为SQL Fundamentals的Skill Track。\n我们先来看看这个Track的介绍：\nGain the fundamental skills you need to interact with and query your data in SQL—a powerful language used by data-driven businesses large and small to explore and manipulate their data to extract meaningful insights.\nIn this track, you\u0026rsquo;ll learn the skills you need to level up your data skills and leave Excel behind you. Through hands-on exercises, you’ll discover how to quickly summarize, join tables, and use window functions and built-in PostgreSQL functions to analyze your data.\n从介绍可知，这个Track主要针对SQL零基础入门，从包含课程也可以看到，基本囊括了一个SQL新手需要学习的所有SQL知识（不过课程使用的PostgreSQL，我实际工作中用到的是hiveSQL，所以会发现一些进阶的函数两者不匹配，但相似度还是很高的）：\nIntermediate SQL Queries SQL for Joining Data Data Manipulation in SQL Functions for Manipulating Date in PostgreSQL ","permalink":"https://actuallyyao.com/posts/data/learn_data/","summary":"2019年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。\n随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内部的BI平台做数据查询、日常观测Tableau看板advanced level的SQL。\n第一次接触SQL已经是工作之后，那时看到数据分析师的电脑屏幕上总是密密麻麻的代码，不仅觉得无比高端，同时也觉得与自己无关。\n直到项目上需要取数DA排期排不上，才第一次想，需求也不复杂，要不自己试试。于是一边网上看教程（这里主要是W3Cschool），一边看着之前DA给写过的SQL照猫画虎，终于写成了自己的第一个SQL。原本觉得和自己无关的代码，突然可以自己写出来，还是很激动的，并且也并不觉得很难。从此，我便能自己写就自己写，不知不觉节省了不少等排期的功夫。\n来到2021年，我逐渐觉得自己的SQL能力遇到了瓶颈，于是想找一找网课做系统性的学习。这里不记得如何找到了DataCamp，它也是这篇博客的主角。\nDataCamp DataCamp offers interactive R, Python, Sheets, SQL and shell courses. 这里不得不提DataCamp的Tracks。网站针对你想要学习到的技能（Skill Tracks），或成为的角色（Career Tracks），把需要学习的课程按照一定顺序排列起来组成Tracks，交给你一步一步学，实质其实就是课程的list。当时的我想要系统学习SQL，便enroll了名为SQL Fundamentals的Skill Track。\n我们先来看看这个Track的介绍：\nGain the fundamental skills you need to interact with and query your data in SQL—a powerful language used by data-driven businesses large and small to explore and manipulate their data to extract meaningful insights.\nIn this track, you\u0026rsquo;ll learn the skills you need to level up your data skills and leave Excel behind you.","title":"我是如何学习数据分析的"},{"content":"","permalink":"https://actuallyyao.com/posts/tech/hugo_first/","summary":"","title":"Building a Hugo blog from scratch"},{"content":"Task 1 Prompt The graph below shows the proportion of four different materials that were recycled from 1982 to 2010 in a particular country.\nSummarize the information by selecting and reporting the main features, and make comparisons where relevant.\nWrite at least 150 words.\nAnswer Throughout the decades, recycling rates for all the listed materials have been increasing in this country. To the citizens, this should be a good thing. However, there are some additional points worth noting.\nFirst of all, we can see that even though all the plotted materials are recycled by a greater proportion as time passes, there are significant differences among them. In comparison, glass containers and aluminum cans have witnessed larger growth in terms of proportion recycled than paper, cardboard and plastics. This was probably due to increased awareness of recycling them or critical advancement in the technologies needed to recycle them. Also, the recycling rate of glass and aluminum plummeted in earth 1990s, resulting from the likely intensified industrialization of the country.\nSecond, the growth of paper\u0026rsquo; and cardboard\u0026rsquo;s recycling rate was not significant compared with some other materials, but the exact number topped the list at around 70%. The reason might be that paper-made products are easier to recycle but further increasing the recycling rate require great technological advancement, which is challenging to achieve.\nFinally, plastics have been recycled more but the recycling rate stood below 10% by the end of the first decade of this century. Plastics are not naturally decomposable so technological or chemical means need to be invented to recycle plastics more, and this may be the reason why this country has struggled to step up its recycling. (233 words)\nHigh band sample Sample 1 The line graph illustrates the percentage of 4 things – paper \u0026amp; cardboard, glass containers, aluminum cans and plastics – that were recycled in an unspecified country between 1982 and 2010.\nOverall, when compared to 1982, the total percentage of recycling increased over the years. While the amount / proportion of recycled aluminum cans and plastics had seen a steady increase, paper \u0026amp; cardboard and glass containers had some fluctuations until 1994.\nThe percentage of recycled aluminum cans increased from just 5% in 1983 to 45% in 2010. Plastics recycling also saw an improvement from less than 5% to 9% in 2010.\nIn contrast, glass containers reuse had initially fallen by 10% in 8 years but then, from 1990 it had a steady rise and reached 60% in 2010. Paper \u0026amp; cardboard recycling had also seen fluctuations in the beginning but then reached its peak at 80% in 1994 and then steadily dropped to reach 70% in 2010.\nEven though there were fluctuations in the recycling rate of paper and cardboard and glass containers over the given period, the general trend was upward.\nWhile paper and cardboard were the most recycled items throughout the given period, plastic was the least recycled thing. (205 words)\nSample 2 The chart shows the percentage of paper and cardboard, glass containers, aluminum cans and plastics that were recycled in one country between 1982 and 2010.\nIn 1982, about 65% of paper and cardboard was recycled. This figure fluctuated before rising steeply to reach a peak 80% in 1994. From then on, however, it decreased steadily to a level of 70% in 2010. In 1982, half of all glass containers were recycled; after dipping to a low of 40% in 1990, the glass recycling rate gradually increased to 60% by 2010.\nAluminum cans were first recycled in 1986, starting at about 5%, but this figure climbed rapidly over 25 years and by 2010 it had reached 45%. Recycling of plastics, on the other hand, was not introduced until 1990 and, although the growth in this category was also constant, it was very slow, rising from about 2% to around 8% over the period.\nOverall, the proportion of paper and cardboard that was recycled was the highest of the four class of material, but this category experienced a decline after 1994, whereas there was a continuing upward trend in the recycling of the other materials. (200 words)\nTask 2 Prompt The diagram shows the different stages in the production of woolen goods.\nSummarize the information by selecting and reporting the main features and make comparisons where relevant.\nYou should write at least 150 words.\nAnswer The provided diagram illustrates the process of manufacturing products from wool.\nIt is shown in the chart that raw materials are first sheared from sheep before being cleaned and dried. This is followed by the machines spinning process which creates the first divergence in the chart. At this point, the major product is wool waiting for later use, while some materials are made into string which is recycled.\nContinue on the main process, the next products are tufts of wool, which are later moved into storage, We can also see that, at about this stage, some of the wool is dyed.\nGoing forward, balls of yarn are made, followed by either knitting or the production of woolen goods such as carpets and jackets.\nOverall, the diagram indicates that it requires many stages to go from sheep to end products. On top of that, along the process of woolen goods production, several in-between products are manufactured. (155 words)\n","permalink":"https://actuallyyao.com/posts/blog/writing_prac_1/","summary":"Task 1 Prompt The graph below shows the proportion of four different materials that were recycled from 1982 to 2010 in a particular country.\nSummarize the information by selecting and reporting the main features, and make comparisons where relevant.\nWrite at least 150 words.\nAnswer Throughout the decades, recycling rates for all the listed materials have been increasing in this country. To the citizens, this should be a good thing. However, there are some additional points worth noting.","title":"Writing Practice I"},{"content":"Window Function 先分举报量分层取各个举报原因对应的举报次数，然后通过开窗函数取每个举报量分层中举报次数排第一的举报原因\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 SELECT DISTINCT report_cnt_range, report_reason_name, report_cnt, ROW_NUMBER () OVER ( PARTITION BY report_cnt_range ORDER BY report_cnt ) as rank FROM ( SELECT DISTINCT user_range.report_cnt_range as report_cnt_range, report_detail.report_reason_name as report_reason_name, COUNT (DISTINCT report_detail.object_id) as report_cnt FROM XXX ) WHERE rank = 1 WR-A Sampling Use log to retain precision\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 SELECT room_id, log(rand) *(1 /(vv / vv_all)) AS key FROM ( SELECT type, room_id, vv, sum(vv) OVER(partition by type) AS all_vv, rand() AS rand FROM ( SELECT \u0026#39;all\u0026#39; AS type, room_id, vv FROM room_id_vv ) ) ORDER BY key DESC LIMIT 100 COLLECT_SET and SORT_ARRAY 如果需要array中的元素保持一定的顺序，可以使用sort_array函数来实现的：\nsort_array(Array\u0026lt;T\u0026gt; a) 根据数组元素的自然顺序按升序对输入数组排序并返回它\nselect sort_array(collect_set(col))\n","permalink":"https://actuallyyao.com/posts/data/sql_save/","summary":"Window Function 先分举报量分层取各个举报原因对应的举报次数，然后通过开窗函数取每个举报量分层中举报次数排第一的举报原因\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 SELECT DISTINCT report_cnt_range, report_reason_name, report_cnt, ROW_NUMBER () OVER ( PARTITION BY report_cnt_range ORDER BY report_cnt ) as rank FROM ( SELECT DISTINCT user_range.report_cnt_range as report_cnt_range, report_detail.report_reason_name as report_reason_name, COUNT (DISTINCT report_detail.object_id) as report_cnt FROM XXX ) WHERE rank = 1 WR-A Sampling Use log to retain precision","title":"Useful SQL"},{"content":" I\u0026rsquo;m Yao. I\u0026rsquo;m originally from Taiyuan and currently reside in Shanghai.\nI work as a product manager at tech companies.\nI\u0026rsquo;ve achieved, and I\u0026rsquo;ve lost.\nKeep walking, in praise of old memories\u0026hellip;\nMy CV\nFavorite channels:\nThomas Flight All about cinema GeoWizard Geoguessr and more 稚嫩的魔法师 Paradox games Eddie Woo Picked up many math from him ","permalink":"https://actuallyyao.com/about/","summary":" I\u0026rsquo;m Yao. I\u0026rsquo;m originally from Taiyuan and currently reside in Shanghai.\nI work as a product manager at tech companies.\nI\u0026rsquo;ve achieved, and I\u0026rsquo;ve lost.\nKeep walking, in praise of old memories\u0026hellip;\nMy CV\nFavorite channels:\nThomas Flight All about cinema GeoWizard Geoguessr and more 稚嫩的魔法师 Paradox games Eddie Woo Picked up many math from him ","title":"About"},{"content":"","permalink":"https://actuallyyao.com/tags/","summary":"","title":"Tags"}]