<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>我是如何学习数据分析的 | Yao&#39;s World</title>
<meta name="keywords" content="SQL, Data">
<meta name="description" content="2019 年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。 随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内">
<meta name="author" content="Yao">
<link rel="canonical" href="https://actuallyyao.com/posts/data/learn_data/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.eee75ad2f448bcdb0429ec2274d6f11c8ddcee481b8e8d2ce585ce48be4c4b42.css" integrity="sha256-7uda0vRIvNsEKewidNbxHI3c7kgbjo0s5YXOSL5MS0I=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://actuallyyao.com/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://actuallyyao.com/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://actuallyyao.com/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://actuallyyao.com/favicon/apple-touch-icon.png">
<link rel="mask-icon" href="https://actuallyyao.com/favicon/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="我是如何学习数据分析的" />
<meta property="og:description" content="2019 年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。 随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://actuallyyao.com/posts/data/learn_data/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-30T21:44:51+08:00" />
<meta property="article:modified_time" content="2022-12-30T21:44:51+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="我是如何学习数据分析的"/>
<meta name="twitter:description" content="2019 年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。 随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://actuallyyao.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Data",
      "item": "https://actuallyyao.com/posts/data/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "我是如何学习数据分析的",
      "item": "https://actuallyyao.com/posts/data/learn_data/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "我是如何学习数据分析的",
  "name": "我是如何学习数据分析的",
  "description": "2019 年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。 随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内",
  "keywords": [
    "SQL", "Data"
  ],
  "articleBody": "2019 年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。\n随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内部的 BI 平台做数据查询、日常观测Tableau 看板advanced level 的 SQL。\n第一次接触 SQL 已经是工作之后，那时看到数据分析师的电脑屏幕上总是密密麻麻的代码，不仅觉得无比高端，同时也觉得与自己无关。\n直到项目上需要取数 DA 排期排不上，才第一次想，需求也不复杂，要不自己试试。于是一边网上看教程（这里主要是W3Cschool），一边看着之前 DA 给写过的 SQL 照猫画虎，终于写成了自己的第一个 SQL。原本觉得和自己无关的代码，突然可以自己写出来，还是很激动的，并且也并不觉得很难。从此，我便能自己写就自己写，不知不觉节省了不少等排期的功夫。\n来到 2021 年，我逐渐觉得自己的 SQL 能力遇到了瓶颈，于是想找一找网课做系统性的学习。这里不记得如何找到了 DataCamp，它也是这篇博客的主角。\n这里不得不提 DataCamp 的 Tracks。网站针对你想要学习到的技能（Skill Tracks），或成为的角色（Career Tracks），把需要学习的课程按照一定顺序排列起来组成 Tracks，交给你一步一步学，实质其实就是课程的 list。当时的我想要系统学习 SQL，便 enroll 了名为SQL Fundamentals的 Skill Track。\n我们先来看看这个 Track 的介绍：\nGain the fundamental skills you need to interact with and query your data in SQL—a powerful language used by data-driven businesses large and small to explore and manipulate their data to extract meaningful insights.\nIn this track, you’ll learn the skills you need to level up your data skills and leave Excel behind you. Through hands-on exercises, you’ll discover how to quickly summarize, join tables, and use window functions and built-in PostgreSQL functions to analyze your data.\n从介绍可知，这个 Track 主要针对 SQL 零基础入门，从包含课程也可以看到，基本囊括了一个 SQL 新手需要学习的所有 SQL 知识（不过课程使用的 PostgreSQL，我实际工作中用到的是 hiveSQL，所以会发现一些进阶的函数两者不匹配，但相似度还是很高的）：\nIntermediate SQL Queries SQL for Joining Data Data Manipulation in SQL Functions for Manipulating Date in PostgreSQL ",
  "wordCount" : "787",
  "inLanguage": "en",
  "datePublished": "2022-12-30T21:44:51+08:00",
  "dateModified": "2022-12-30T21:44:51+08:00",
  "author":{
    "@type": "Person",
    "name": "Yao"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://actuallyyao.com/posts/data/learn_data/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Yao's World",
    "logo": {
      "@type": "ImageObject",
      "url": "https://actuallyyao.com/favicon/favicon.ico"
    }
  }
}
</script>
<link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/lxgwwenkaiscreen.css" media="print" onload="this.media='all'">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Nunito+Sans&display=swap" rel="stylesheet">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">

<script src="https://kit.fontawesome.com/b8c0f0d05c.js" crossorigin="anonymous"></script>
</head>

<body class=" dark" id="top"><head>
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@1,900,700,500,301,701,300,501,401,901,400,2&display=swap" rel="stylesheet">
</head>
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://actuallyyao.com/" accesskey="h" title="Yao&#39;s World (Alt + H)">
                <img src="https://actuallyyao.com/img/icon.png" alt="" aria-label="logo"
                    height="30">Yao&#39;s World</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://actuallyyao.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://actuallyyao.com/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://actuallyyao.com/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://actuallyyao.com/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://actuallyyao.notion.site/Reading-Tracker-4917df096e07426a8243682880c71330" title="Reading">
                    <span>Reading</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://actuallyyao.com/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
	<header class="post-header">
		<div class="breadcrumbs"><a href="https://actuallyyao.com/">Home</a>&nbsp;»&nbsp;<a href="https://actuallyyao.com/posts/">Posts</a>&nbsp;»&nbsp;<a href="https://actuallyyao.com/posts/data/">Data</a></div>
		<h1 class="post-title">
			我是如何学习数据分析的
		</h1>
		<div class="post-meta"><span title='2022-12-30 21:44:51 +0800 CST'>2022-12-30</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;787 words&nbsp;·&nbsp;Yao

</div>
	</header> 


	<div class="post-content"><p>2019 年毕业进入互联网行业，虽然不是技术岗位，但日常的工作离不开数据。</p>
<p>随着工作年限的提升，工作对我数据能力的要求也在迅速上升。从一开始使用公司内部的 BI 平台做数据查询、日常观测<abbr title="Tableau约在2020年被前司淘汰，转而使用自研的BI平台">Tableau 看板</abbr>advanced level 的 SQL。</p>
<p>第一次接触 SQL 已经是工作之后，那时看到数据分析师的电脑屏幕上总是密密麻麻的代码，不仅觉得无比高端，同时也觉得与自己无关。</p>
<p>直到项目上需要取数 DA 排期排不上，才第一次想，需求也不复杂，要不自己试试。于是一边网上看教程（这里主要是<a href="https://www.w3cschool.cn/sql/">W3Cschool</a>），一边看着之前 DA 给写过的 SQL 照猫画虎，终于写成了自己的第一个 SQL。原本觉得和自己无关的代码，突然可以自己写出来，还是很激动的，并且也并不觉得很难。从此，我便能自己写就自己写，不知不觉节省了不少等排期的功夫。</p>
<p>来到 2021 年，我逐渐觉得自己的 SQL 能力遇到了瓶颈，于是想找一找网课做系统性的学习。这里不记得如何找到了 <a href="https://www.datacamp.com/">DataCamp</a>，它也是这篇博客的主角。</p>
<!-- <a target="_blank" href=https://app.datacamp.com/learn/skill-tracks/sql-fundamentals?version&#61;2 title=DataCamp class="friendurl">
  <div class="frienddiv">
    <div class="frienddivleft">
      <img class="myfriend" src=https://res.cloudinary.com/crunchbase-production/image/upload/c_lpad,h_170,w_170,f_auto,b_white,q_auto:eco,dpr_1/hq30ze9287y9ztkmcdhy />
    </div>
    <div class="frienddivright">
      <div class="friendname">DataCamp</div>
      <div class="friendinfo">DataCamp offers interactive R, Python, Sheets, SQL and shell courses.</div>
    </div>
  </div>
</a>
 -->
<p>这里不得不提 DataCamp 的 Tracks。网站针对你想要学习到的技能（Skill Tracks），或成为的角色（Career Tracks），把需要学习的课程按照一定顺序排列起来组成 Tracks，交给你一步一步学，实质其实就是课程的 list。当时的我想要系统学习 SQL，便 enroll 了名为<a href="https://app.datacamp.com/learn/skill-tracks/sql-fundamentals?version=2">SQL Fundamentals</a>的 Skill Track。</p>
<p>我们先来看看这个 Track 的介绍：</p>
<blockquote>
<p>Gain the fundamental skills you need to interact with and query your data in SQL—a powerful language used by data-driven businesses large and small to explore and manipulate their data to extract meaningful insights.</p>
<p>In this track, you&rsquo;ll learn the skills you need to level up your data skills and leave Excel behind you. Through hands-on exercises, you’ll discover how to quickly summarize, join tables, and use window functions and built-in PostgreSQL functions to analyze your data.</p>
</blockquote>
<p>从介绍可知，这个 Track 主要针对 SQL 零基础入门，从包含课程也可以看到，基本囊括了一个 SQL 新手需要学习的所有 SQL 知识（不过课程使用的 PostgreSQL，我实际工作中用到的是 hiveSQL，所以会发现一些进阶的函数两者不匹配，但相似度还是很高的）：</p>
<ul>
<li>Intermediate SQL Queries</li>
<li>SQL for Joining Data</li>
<li>Data Manipulation in SQL</li>
<li>Functions for Manipulating Date in PostgreSQL</li>
</ul>


	</div>

	<link rel="stylesheet" href="../../assets/css/extended/abstract.css" />
	
	
	<script>
		let tianliGPT_postSelector = "#top > main > article > div.post-content";
		let tianliGPT_key = "e420ba8c8c37337e0bff";
		var tianliGPTIsRunning = false;

		function insertAIDiv(selector) {
			
			removeExistingAIDiv();

			
			const targetElement = document.querySelector(selector);

			
			if (!targetElement) {
				return;
			}

			
			const aiDiv = document.createElement("div");
			aiDiv.className = "post-TianliGPT";

			const aiTitleDiv = document.createElement("div");
			aiTitleDiv.className = "tianliGPT-title";
			aiDiv.appendChild(aiTitleDiv);

			const aiIcon = document.createElement("i");
			aiIcon.className = "tianliGPT-title-icon";
			aiTitleDiv.appendChild(aiIcon);

			
			aiIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 48 48">
  <title>机器人</title>
  <g id="&#x673A;&#x5668;&#x4EBA;" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <path d="M34.717885,5.03561087 C36.12744,5.27055371 37.079755,6.60373651 36.84481,8.0132786 L35.7944,14.3153359 L38.375,14.3153359 C43.138415,14.3153359 47,18.1768855 47,22.9402569 L47,34.4401516 C47,39.203523 43.138415,43.0650727 38.375,43.0650727 L9.625,43.0650727 C4.861585,43.0650727 1,39.203523 1,34.4401516 L1,22.9402569 C1,18.1768855 4.861585,14.3153359 9.625,14.3153359 L12.2056,14.3153359 L11.15519,8.0132786 C10.920245,6.60373651 11.87256,5.27055371 13.282115,5.03561087 C14.69167,4.80066802 16.024865,5.7529743 16.25981,7.16251639 L17.40981,14.0624532 C17.423955,14.1470924 17.43373,14.2315017 17.43948,14.3153359 L30.56052,14.3153359 C30.56627,14.2313867 30.576045,14.1470924 30.59019,14.0624532 L31.74019,7.16251639 C31.975135,5.7529743 33.30833,4.80066802 34.717885,5.03561087 Z M38.375,19.4902885 L9.625,19.4902885 C7.719565,19.4902885 6.175,21.0348394 6.175,22.9402569 L6.175,34.4401516 C6.175,36.3455692 7.719565,37.89012 9.625,37.89012 L38.375,37.89012 C40.280435,37.89012 41.825,36.3455692 41.825,34.4401516 L41.825,22.9402569 C41.825,21.0348394 40.280435,19.4902885 38.375,19.4902885 Z M14.8575,23.802749 C16.28649,23.802749 17.445,24.9612484 17.445,26.3902253 L17.445,28.6902043 C17.445,30.1191812 16.28649,31.2776806 14.8575,31.2776806 C13.42851,31.2776806 12.27,30.1191812 12.27,28.6902043 L12.27,26.3902253 C12.27,24.9612484 13.42851,23.802749 14.8575,23.802749 Z M33.1425,23.802749 C34.57149,23.802749 35.73,24.9612484 35.73,26.3902253 L35.73,28.6902043 C35.73,30.1191812 34.57149,31.2776806 33.1425,31.2776806 C31.71351,31.2776806 30.555,30.1191812 30.555,28.6902043 L30.555,26.3902253 C30.555,24.9612484 31.71351,23.802749 33.1425,23.802749 Z" id="&#x5F62;&#x72B6;&#x7ED3;&#x5408;" fill="#444444" fill-rule="nonzero"></path>
  </g>
  </svg>`;

			const aiTitleTextDiv = document.createElement("div");
			aiTitleTextDiv.className = "tianliGPT-title-text";
			aiTitleTextDiv.textContent = "AI TL;NR";
			aiTitleDiv.appendChild(aiTitleTextDiv);

			const aiTagDiv = document.createElement("div");
			aiTagDiv.className = "tianliGPT-tag";
			aiTagDiv.id = "tianliGPT-tag";
			aiTagDiv.textContent = "YaoGPT";
			aiTitleDiv.appendChild(aiTagDiv);

			const aiExplanationDiv = document.createElement("div");
			aiExplanationDiv.className = "tianliGPT-explanation";
			aiExplanationDiv.innerHTML =
				"Generating..." + '<span class="blinking-cursor"></span>';
			aiDiv.appendChild(aiExplanationDiv); 

			
			targetElement.insertBefore(aiDiv, targetElement.firstChild);
		}

		function removeExistingAIDiv() {
			
			const existingAIDiv = document.querySelector(".post-TianliGPT");

			
			if (existingAIDiv) {
				existingAIDiv.parentElement.removeChild(existingAIDiv);
			}
		}

		var tianliGPT = {
			
			getTitleAndContent: function () {
				try {
					const title = document.title;
					const container = document.querySelector(
						tianliGPT_postSelector
					);
					if (!container) {
						console.warn(
							"TianliGPT：找不到文章容器。请尝试将引入的代码放入到文章容器之后。如果本身没有打算使用摘要功能可以忽略此提示。"
						);
						return "";
					}
					const paragraphs = container.getElementsByTagName("p");
					const headings =
						container.querySelectorAll("h1, h2, h3, h4, h5");
					let content = "";

					for (let h of headings) {
						content += h.innerText + " ";
					}

					for (let p of paragraphs) {
						
						const filteredText = p.innerText.replace(
							/https?:\/\/[^\s]+/g,
							""
						);
						content += filteredText;
					}

					const combinedText = title + " " + content;
					let wordLimit = 1000;
					if (typeof tianliGPT_wordLimit !== "undefined") {
						wordLimit = tianliGPT_wordLimit;
					}
					const truncatedText = combinedText.slice(0, wordLimit);
					return truncatedText;
				} catch (e) {
					console.error(
						"TianliGPT错误：可能由于一个或多个错误导致没有正常运行，原因出在获取文章容器中的内容失败，或者可能是在文章转换过程中失败。",
						e
					);
					return "";
				}
			},

			fetchTianliGPT: async function (content) {
				if (!tianliGPT_key) {
					return "没有获取到key，代码可能没有安装正确。如果你需要在tianli_gpt文件引用前定义tianliGPT_key变量。详细请查看文档。";
				}

				if (tianliGPT_key === "5Q5mpqRK5DkwT1X9Gi5e") {
					return "请购买 key 使用，如果你能看到此条内容，则说明代码安装正确。";
				}
				var url = window.location.href;
				const title = document.title;
				const apiUrl = `https:
					content
				)}&key=${encodeURIComponent(
					tianliGPT_key
				)}&url=${encodeURIComponent(url)}&title=${encodeURIComponent(
					title
				)}`;
				const timeout = 20000; 

				try {
					const controller = new AbortController();
					const timeoutId = setTimeout(
						() => controller.abort(),
						timeout
					);
					const response = await fetch(apiUrl, {
						signal: controller.signal,
					});
					if (response.ok) {
						const data = await response.json();
						return data.summary;
					} else {
						if (response.status === 402) {
							document
								.querySelectorAll(".post-TianliGPT")
								.forEach((el) => {
									el.style.display = "none";
								});
						}
						throw new Error(
							"TianliGPT：余额不足，请充值后请求新的文章"
						);
					}
				} catch (error) {
					if (error.name === "AbortError") {
						if (window.location.hostname === "localhost") {
							console.warn(
								"警告：请勿在本地主机上测试 API 密钥。"
							);
							return "获取文章摘要超时。请勿在本地主机上测试 API 密钥。";
						} else {
							console.error("请求超时");
							return "获取文章摘要超时。当你出现这个问题时，可能是key或者绑定的域名不正确。也可能是因为文章过长导致的 AI 运算量过大，您可以稍等一下然后刷新页面重试。";
						}
					} else {
						console.error("请求失败：", error);
						return "获取文章摘要失败，请稍后再试。";
					}
				}
			},

			aiShowAnimation: function (text) {
				const element = document.querySelector(
					".tianliGPT-explanation"
				);
				if (!element) {
					return;
				}

				if (tianliGPTIsRunning) {
					return;
				}

				
				if (
					typeof tianliGPT_typingAnimate !== "undefined" &&
					!tianliGPT_typingAnimate
				) {
					
					element.innerHTML = text;
					return;
				}

				tianliGPTIsRunning = true;
				const typingDelay = 25;
				const waitingTime = 1000;
				const punctuationDelayMultiplier = 6;

				element.style.display = "block";
				element.innerHTML =
					"Generating..." + '<span class="blinking-cursor"></span>';

				let animationRunning = true;
				let currentIndex = 0;
				let initialAnimation = true;
				let lastUpdateTime = performance.now();

				const animate = () => {
					if (currentIndex < text.length && animationRunning) {
						const currentTime = performance.now();
						const timeDiff = currentTime - lastUpdateTime;

						const letter = text.slice(
							currentIndex,
							currentIndex + 1
						);
						const isPunctuation = /[，。！、？,.!?]/.test(letter);
						const delay = isPunctuation
							? typingDelay * punctuationDelayMultiplier
							: typingDelay;

						if (timeDiff >= delay) {
							element.innerText = text.slice(0, currentIndex + 1);
							lastUpdateTime = currentTime;
							currentIndex++;

							if (currentIndex < text.length) {
								element.innerHTML =
									text.slice(0, currentIndex) +
									'<span class="blinking-cursor"></span>';
							} else {
								element.innerHTML = text;
								element.style.display = "block";
								tianliGPTIsRunning = false;
								observer.disconnect(); 
							}
						}
						requestAnimationFrame(animate);
					}
				};

				
				const observer = new IntersectionObserver(
					(entries) => {
						let isVisible = entries[0].isIntersecting;
						animationRunning = isVisible; 
						if (animationRunning && initialAnimation) {
							setTimeout(() => {
								requestAnimationFrame(animate);
							}, 200);
						}
					},
					{ threshold: 0 }
				);
				let post_ai = document.querySelector(".post-TianliGPT");
				observer.observe(post_ai); 
			},
		};

		function runTianliGPT() {
			insertAIDiv(tianliGPT_postSelector);
			const content = tianliGPT.getTitleAndContent();
			if (content) {
				console.log("TianliGPT本次提交的内容为：" + content);
			}
			tianliGPT.fetchTianliGPT(content).then((summary) => {
				tianliGPT.aiShowAnimation(summary);
			});
		}

		function checkURLAndRun() {
			if (typeof tianliGPT_postURL === "undefined") {
				runTianliGPT(); 
				return;
			}

			try {
				const wildcardToRegExp = (s) => {
					return new RegExp(
						"^" + s.split(/\*+/).map(regExpEscape).join(".*") + "$"
					);
				};

				const regExpEscape = (s) => {
					return s.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&");
				};

				const urlPattern = wildcardToRegExp(tianliGPT_postURL);
				const currentURL = window.location.href;

				if (urlPattern.test(currentURL)) {
					runTianliGPT(); 
				} else {
					console.log(
						"TianliGPT：因为不符合自定义的链接规则，我决定不执行摘要功能。"
					);
				}
			} catch (error) {
				console.error(
					"TianliGPT：我没有看懂你编写的自定义链接规则，所以我决定不执行摘要功能",
					error
				);
			}
		}

		document.addEventListener("DOMContentLoaded", function () {
			checkURLAndRun();
		});
	</script>

	<footer class="post-footer">
		<ul class="post-tags">
			<li><a href="https://actuallyyao.com/tags/sql/">SQL</a></li>
			<li><a href="https://actuallyyao.com/tags/data/">Data</a></li>
		</ul>
	</footer>
<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">Comments</span>
        <hr />
    </div>
    <div id="tcomment"></div>
    <script src="https://cdn.staticfile.org/twikoo/1.6.9/twikoo.all.min.js"></script>
    <script>
        twikoo.init({
            envId: "https://twikoo-api-wheat-kappa.vercel.app/",  
            el: "#tcomment",
            lang: 'EN',
            region: 'ap-shanghai',  
            path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        });
    </script>
</div>

</article>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

    <link rel="stylesheet" href="/css/cursor.css">
    <script src="https://actuallyyao.com/js/cursor.js"></script>
</body>




	
	<script>
		let tianliGPT_postSelector = "#top > main > article > div.post-content";
		let tianliGPT_key = "e420ba8c8c37337e0bff";
		var tianliGPTIsRunning = false;

		function insertAIDiv(selector) {
			
			removeExistingAIDiv();

			
			const targetElement = document.querySelector(selector);

			
			if (!targetElement) {
				return;
			}

			
			const aiDiv = document.createElement("div");
			aiDiv.className = "post-TianliGPT";

			const aiTitleDiv = document.createElement("div");
			aiTitleDiv.className = "tianliGPT-title";
			aiDiv.appendChild(aiTitleDiv);

			const aiIcon = document.createElement("i");
			aiIcon.className = "tianliGPT-title-icon";
			aiTitleDiv.appendChild(aiIcon);

			
			aiIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 48 48">
  <title>机器人</title>
  <g id="&#x673A;&#x5668;&#x4EBA;" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <path d="M34.717885,5.03561087 C36.12744,5.27055371 37.079755,6.60373651 36.84481,8.0132786 L35.7944,14.3153359 L38.375,14.3153359 C43.138415,14.3153359 47,18.1768855 47,22.9402569 L47,34.4401516 C47,39.203523 43.138415,43.0650727 38.375,43.0650727 L9.625,43.0650727 C4.861585,43.0650727 1,39.203523 1,34.4401516 L1,22.9402569 C1,18.1768855 4.861585,14.3153359 9.625,14.3153359 L12.2056,14.3153359 L11.15519,8.0132786 C10.920245,6.60373651 11.87256,5.27055371 13.282115,5.03561087 C14.69167,4.80066802 16.024865,5.7529743 16.25981,7.16251639 L17.40981,14.0624532 C17.423955,14.1470924 17.43373,14.2315017 17.43948,14.3153359 L30.56052,14.3153359 C30.56627,14.2313867 30.576045,14.1470924 30.59019,14.0624532 L31.74019,7.16251639 C31.975135,5.7529743 33.30833,4.80066802 34.717885,5.03561087 Z M38.375,19.4902885 L9.625,19.4902885 C7.719565,19.4902885 6.175,21.0348394 6.175,22.9402569 L6.175,34.4401516 C6.175,36.3455692 7.719565,37.89012 9.625,37.89012 L38.375,37.89012 C40.280435,37.89012 41.825,36.3455692 41.825,34.4401516 L41.825,22.9402569 C41.825,21.0348394 40.280435,19.4902885 38.375,19.4902885 Z M14.8575,23.802749 C16.28649,23.802749 17.445,24.9612484 17.445,26.3902253 L17.445,28.6902043 C17.445,30.1191812 16.28649,31.2776806 14.8575,31.2776806 C13.42851,31.2776806 12.27,30.1191812 12.27,28.6902043 L12.27,26.3902253 C12.27,24.9612484 13.42851,23.802749 14.8575,23.802749 Z M33.1425,23.802749 C34.57149,23.802749 35.73,24.9612484 35.73,26.3902253 L35.73,28.6902043 C35.73,30.1191812 34.57149,31.2776806 33.1425,31.2776806 C31.71351,31.2776806 30.555,30.1191812 30.555,28.6902043 L30.555,26.3902253 C30.555,24.9612484 31.71351,23.802749 33.1425,23.802749 Z" id="&#x5F62;&#x72B6;&#x7ED3;&#x5408;" fill="#444444" fill-rule="nonzero"></path>
  </g>
  </svg>`;

			const aiTitleTextDiv = document.createElement("div");
			aiTitleTextDiv.className = "tianliGPT-title-text";
			aiTitleTextDiv.textContent = "AI TL;NR";
			aiTitleDiv.appendChild(aiTitleTextDiv);

			const aiTagDiv = document.createElement("div");
			aiTagDiv.className = "tianliGPT-tag";
			aiTagDiv.id = "tianliGPT-tag";
			aiTagDiv.textContent = "YaoGPT";
			aiTitleDiv.appendChild(aiTagDiv);

			const aiExplanationDiv = document.createElement("div");
			aiExplanationDiv.className = "tianliGPT-explanation";
			aiExplanationDiv.innerHTML =
				"Generating..." + '<span class="blinking-cursor"></span>';
			aiDiv.appendChild(aiExplanationDiv); 

			
			targetElement.insertBefore(aiDiv, targetElement.firstChild);
		}

		function removeExistingAIDiv() {
			
			const existingAIDiv = document.querySelector(".post-TianliGPT");

			
			if (existingAIDiv) {
				existingAIDiv.parentElement.removeChild(existingAIDiv);
			}
		}

		var tianliGPT = {
			
			getTitleAndContent: function () {
				try {
					const title = document.title;
					const container = document.querySelector(
						tianliGPT_postSelector
					);
					if (!container) {
						console.warn(
							"TianliGPT：找不到文章容器。请尝试将引入的代码放入到文章容器之后。如果本身没有打算使用摘要功能可以忽略此提示。"
						);
						return "";
					}
					const paragraphs = container.getElementsByTagName("p");
					const headings =
						container.querySelectorAll("h1, h2, h3, h4, h5");
					let content = "";

					for (let h of headings) {
						content += h.innerText + " ";
					}

					for (let p of paragraphs) {
						
						const filteredText = p.innerText.replace(
							/https?:\/\/[^\s]+/g,
							""
						);
						content += filteredText;
					}

					const combinedText = title + " " + content;
					let wordLimit = 1000;
					if (typeof tianliGPT_wordLimit !== "undefined") {
						wordLimit = tianliGPT_wordLimit;
					}
					const truncatedText = combinedText.slice(0, wordLimit);
					return truncatedText;
				} catch (e) {
					console.error(
						"TianliGPT错误：可能由于一个或多个错误导致没有正常运行，原因出在获取文章容器中的内容失败，或者可能是在文章转换过程中失败。",
						e
					);
					return "";
				}
			},

			fetchTianliGPT: async function (content) {
				if (!tianliGPT_key) {
					return "没有获取到key，代码可能没有安装正确。如果你需要在tianli_gpt文件引用前定义tianliGPT_key变量。详细请查看文档。";
				}

				if (tianliGPT_key === "5Q5mpqRK5DkwT1X9Gi5e") {
					return "请购买 key 使用，如果你能看到此条内容，则说明代码安装正确。";
				}
				var url = window.location.href;
				const title = document.title;
				const apiUrl = `https:
					content
				)}&key=${encodeURIComponent(
					tianliGPT_key
				)}&url=${encodeURIComponent(url)}&title=${encodeURIComponent(
					title
				)}`;
				const timeout = 20000; 

				try {
					const controller = new AbortController();
					const timeoutId = setTimeout(
						() => controller.abort(),
						timeout
					);
					const response = await fetch(apiUrl, {
						signal: controller.signal,
					});
					if (response.ok) {
						const data = await response.json();
						return data.summary;
					} else {
						if (response.status === 402) {
							document
								.querySelectorAll(".post-TianliGPT")
								.forEach((el) => {
									el.style.display = "none";
								});
						}
						throw new Error(
							"TianliGPT：余额不足，请充值后请求新的文章"
						);
					}
				} catch (error) {
					if (error.name === "AbortError") {
						if (window.location.hostname === "localhost") {
							console.warn(
								"警告：请勿在本地主机上测试 API 密钥。"
							);
							return "获取文章摘要超时。请勿在本地主机上测试 API 密钥。";
						} else {
							console.error("请求超时");
							return "获取文章摘要超时。当你出现这个问题时，可能是key或者绑定的域名不正确。也可能是因为文章过长导致的 AI 运算量过大，您可以稍等一下然后刷新页面重试。";
						}
					} else {
						console.error("请求失败：", error);
						return "获取文章摘要失败，请稍后再试。";
					}
				}
			},

			aiShowAnimation: function (text) {
				const element = document.querySelector(
					".tianliGPT-explanation"
				);
				if (!element) {
					return;
				}

				if (tianliGPTIsRunning) {
					return;
				}

				
				if (
					typeof tianliGPT_typingAnimate !== "undefined" &&
					!tianliGPT_typingAnimate
				) {
					
					element.innerHTML = text;
					return;
				}

				tianliGPTIsRunning = true;
				const typingDelay = 25;
				const waitingTime = 1000;
				const punctuationDelayMultiplier = 6;

				element.style.display = "block";
				element.innerHTML =
					"Generating..." + '<span class="blinking-cursor"></span>';

				let animationRunning = true;
				let currentIndex = 0;
				let initialAnimation = true;
				let lastUpdateTime = performance.now();

				const animate = () => {
					if (currentIndex < text.length && animationRunning) {
						const currentTime = performance.now();
						const timeDiff = currentTime - lastUpdateTime;

						const letter = text.slice(
							currentIndex,
							currentIndex + 1
						);
						const isPunctuation = /[，。！、？,.!?]/.test(letter);
						const delay = isPunctuation
							? typingDelay * punctuationDelayMultiplier
							: typingDelay;

						if (timeDiff >= delay) {
							element.innerText = text.slice(0, currentIndex + 1);
							lastUpdateTime = currentTime;
							currentIndex++;

							if (currentIndex < text.length) {
								element.innerHTML =
									text.slice(0, currentIndex) +
									'<span class="blinking-cursor"></span>';
							} else {
								element.innerHTML = text;
								element.style.display = "block";
								tianliGPTIsRunning = false;
								observer.disconnect(); 
							}
						}
						requestAnimationFrame(animate);
					}
				};

				
				const observer = new IntersectionObserver(
					(entries) => {
						let isVisible = entries[0].isIntersecting;
						animationRunning = isVisible; 
						if (animationRunning && initialAnimation) {
							setTimeout(() => {
								requestAnimationFrame(animate);
							}, 200);
						}
					},
					{ threshold: 0 }
				);
				let post_ai = document.querySelector(".post-TianliGPT");
				observer.observe(post_ai); 
			},
		};

		function runTianliGPT() {
			insertAIDiv(tianliGPT_postSelector);
			const content = tianliGPT.getTitleAndContent();
			if (content) {
				console.log("TianliGPT本次提交的内容为：" + content);
			}
			tianliGPT.fetchTianliGPT(content).then((summary) => {
				tianliGPT.aiShowAnimation(summary);
			});
		}

		function checkURLAndRun() {
			if (typeof tianliGPT_postURL === "undefined") {
				runTianliGPT(); 
				return;
			}

			try {
				const wildcardToRegExp = (s) => {
					return new RegExp(
						"^" + s.split(/\*+/).map(regExpEscape).join(".*") + "$"
					);
				};

				const regExpEscape = (s) => {
					return s.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&");
				};

				const urlPattern = wildcardToRegExp(tianliGPT_postURL);
				const currentURL = window.location.href;

				if (urlPattern.test(currentURL)) {
					runTianliGPT(); 
				} else {
					console.log(
						"TianliGPT：因为不符合自定义的链接规则，我决定不执行摘要功能。"
					);
				}
			} catch (error) {
				console.error(
					"TianliGPT：我没有看懂你编写的自定义链接规则，所以我决定不执行摘要功能",
					error
				);
			}
		}

		document.addEventListener("DOMContentLoaded", function () {
			checkURLAndRun();
		});
	</script>

	<footer class="post-footer">
		<ul class="post-tags">
			<li><a href="https://actuallyyao.com/tags/sql/">SQL</a></li>
			<li><a href="https://actuallyyao.com/tags/data/">Data</a></li>
		</ul>
	</footer>
<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">Comments</span>
        <hr />
    </div>
    <div id="tcomment"></div>
    <script src="https://cdn.staticfile.org/twikoo/1.6.9/twikoo.all.min.js"></script>
    <script>
        twikoo.init({
            envId: "https://twikoo-api-wheat-kappa.vercel.app/",  
            el: "#tcomment",
            lang: 'EN',
            region: 'ap-shanghai',  
            path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        });
    </script>
</div>

</article>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

    <link rel="stylesheet" href="/css/cursor.css">
    <script src="https://actuallyyao.com/js/cursor.js"></script>
</body> -->